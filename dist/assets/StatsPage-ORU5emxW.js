import{j as e,m as o}from"./vendor-motion-g4hyj0Oo.js";import{r as g}from"./vendor-state-C7GhoC4r.js";import{u as f}from"./streakStore-Df38JZ8q.js";function j(t){return t===0?"bg-slate-800/50":t===1?"bg-emerald-900":t===2?"bg-emerald-700":t===3?"bg-emerald-500":t===4?"bg-emerald-400":"bg-amber-400"}function y(t,a){const l=new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric"});return a===0?`${l}: No puzzles`:`${l}: ${a} puzzle${a>1?"s":""}`}function N({days:t=365}){const{getHeatmapData:a,currentStreak:c,longestStreak:l,totalScore:d}=f(),n=a(t),i=[];let s=[];const u=(new Date(n[0]?.date||Date.now()).getDay()+6)%7;for(let r=0;r<u;r++)s.push({date:"",count:-1});for(const r of n)s.push(r),s.length===7&&(i.push(s),s=[]);return s.length>0&&i.push(s),e.jsxs(o.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"glass p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsx("h3",{className:"text-lg font-bold text-gradient",children:"Activity"}),e.jsxs("div",{className:"flex gap-6 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-400",children:c}),e.jsx("div",{className:"text-slate-500 text-xs",children:"Current Streak"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-amber-400",children:l}),e.jsx("div",{className:"text-slate-500 text-xs",children:"Longest Streak"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-brand-400",children:d.toLocaleString()}),e.jsx("div",{className:"text-slate-500 text-xs",children:"Total Score"})]})]})]}),e.jsx("div",{className:"overflow-x-auto pb-2",children:e.jsx("div",{className:"flex gap-[3px] min-w-fit",children:i.map((r,h)=>e.jsx("div",{className:"flex flex-col gap-[3px]",children:r.map((x,v)=>e.jsx("div",{className:"relative group",children:x.count>=0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`w-[13px] h-[13px] rounded-sm ${j(x.count)} transition-colors`}),e.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 bg-slate-700 text-xs text-white rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none z-10",children:y(x.date,x.count)})]}):e.jsx("div",{className:"w-[13px] h-[13px]"})},`${h}-${v}`))},h))})}),e.jsxs("div",{className:"flex items-center gap-2 mt-3 text-xs text-slate-500",children:[e.jsx("span",{children:"Less"}),[0,1,2,3,4,5].map(r=>e.jsx("div",{className:`w-[13px] h-[13px] rounded-sm ${j(r)}`},r)),e.jsx("span",{children:"More"})]})]})}function w(){const{initialize:t,currentStreak:a,longestStreak:c,totalScore:l,history:d}=f();g.useEffect(()=>{t()},[t]);const n=Object.values(d).filter(s=>s>0).length,i=Object.values(d).reduce((s,p)=>s+p,0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(o.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[e.jsx("h2",{className:"text-2xl font-bold",children:"ðŸ“Š Your Stats"}),e.jsx("p",{className:"text-slate-400 mt-1",children:"Track your progress and keep the streak alive!"})]}),e.jsxs(o.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(m,{icon:"ðŸ”¥",label:"Current Streak",value:`${a} days`,color:"text-orange-400"}),e.jsx(m,{icon:"â­",label:"Longest Streak",value:`${c} days`,color:"text-amber-400"}),e.jsx(m,{icon:"ðŸ§©",label:"Puzzles Solved",value:String(i),color:"text-emerald-400"}),e.jsx(m,{icon:"ðŸ†",label:"Total Score",value:l.toLocaleString(),color:"text-brand-400"})]}),e.jsxs(o.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.15},className:"glass p-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Detailed Stats"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Days Played"}),e.jsx("span",{className:"font-semibold",children:n})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Avg Puzzles/Day"}),e.jsx("span",{className:"font-semibold",children:n>0?(i/n).toFixed(1):0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Avg Score/Puzzle"}),e.jsx("span",{className:"font-semibold",children:i>0?Math.round(l/i):0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Completion Rate"}),e.jsxs("span",{className:"font-semibold",children:[n>0?Math.round(i/(n*5)*100):0,"%"]})]})]})]}),e.jsx(o.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:e.jsx(N,{days:365})})]})}function m({icon:t,label:a,value:c,color:l}){return e.jsxs("div",{className:"glass-hover p-4 text-center",children:[e.jsx("div",{className:"text-2xl mb-1",children:t}),e.jsx("div",{className:`text-xl font-bold ${l}`,children:c}),e.jsx("div",{className:"text-xs text-slate-500 mt-1",children:a})]})}export{w as default};
