import{o as q,c as A}from"./vendor-state-C7GhoC4r.js";function P(t){return function(){t|=0,t=t+1831565813|0;let e=Math.imul(t^t>>>15,1|t);return e=e+Math.imul(e^e>>>7,61|e)^e,((e^e>>>14)>>>0)/4294967296}}function j(t){let e=0;for(let a=0;a<t.length;a++){const s=t.charCodeAt(a);e=(e<<5)-e+s|0}return Math.abs(e)}function m(t,e,a){return Math.floor(t()*(a-e+1))+e}function f(t,e){const a=[...e];for(let s=a.length-1;s>0;s--){const o=Math.floor(t()*(s+1));[a[s],a[o]]=[a[o],a[s]]}return a}function D(t,e){return e[Math.floor(t()*e.length)]}function I(t,e){const a=new Date(t),s=Math.floor((a.getTime()-new Date(a.getFullYear(),0,0).getTime())/864e5),o=Math.sin(s/365*Math.PI)*4.5+5.5,n=e*1.3%3-1.5;return Math.max(1,Math.min(10,Math.round(o+n)))}function v(t,e){const a=["Alice","Bob","Carol","Dave","Eve","Frank"],s=["cat","dog","fish","bird","rabbit","turtle"],o=["red","blue","green","yellow","purple","orange"],n=Math.min(2+Math.floor(e/3),4),d=f(t,a).slice(0,n),r=f(t,s).slice(0,n),u=f(t,o).slice(0,n),l=d.map((b,z)=>({person:b,item:r[z],color:u[z]})),i=[];i.push(`${l[0].person} has a ${l[0].color} ${l[0].item}.`),n>1&&i.push(`${l[1].person} does NOT have a ${l[0].item}.`),n>2&&i.push(`The person with the ${l[2].item} likes ${l[2].color}.`),e>=5&&i.push(`${l[n-1].person} doesn't like ${l[0].color}.`);const h=m(t,0,n-1),c=l[h],p=c.person,g=d.filter(b=>b!==p),y=f(t,[p,...g.slice(0,3)]),x=y.indexOf(p);return{type:"logic",title:"Logic Deduction",description:`Based on the clues, who has the ${c.item}?`,data:{type:"logic",premises:i,options:y,correctIndex:x},hints:[`Focus on what ${l[0].person} owns.`,`Eliminate people who can't have the ${c.item}.`,`The answer is ${p.charAt(0)}...`],solution:p}}function O(t,e){const a=["+","-","Ã—"];e>=5&&a.push("Ã·");const s=5+e*3,o=m(t,2,s),n=m(t,2,Math.max(2,Math.floor(s/2))),d=D(t,a);let r,u;switch(d){case"+":r=o+n,u=`${o} + ${n}`;break;case"-":r=Math.max(o,n)-Math.min(o,n),u=`${Math.max(o,n)} - ${Math.min(o,n)}`;break;case"Ã—":r=o*n,u=`${o} Ã— ${n}`;break;case"Ã·":{const h=o*n;r=o,u=`${h} Ã· ${n}`;break}default:r=o+n,u=`${o} + ${n}`}if(e>=7){const h=m(t,1,10);r=r+h,u=`(${u}) + ${h}`}const l=new Set;for(;l.size<3;){const h=m(t,1,5)*(t()>.5?1:-1),c=r+h;c!==r&&c>0&&l.add(c)}const i=f(t,[r,...Array.from(l)]);return{type:"math",title:"Quick Math",description:`What is ${u}?`,data:{type:"math",expression:u,options:i,correctAnswer:r},hints:[`The answer is between ${r-5} and ${r+5}.`,`It's ${r%2===0?"an even":"an odd"} number.`,`The first digit is ${String(r).charAt(0)}.`],solution:r}}function F(t,e){const a=e<=3?3:e<=7?4:5,s=m(t,2,4),o=[];for(let i=0;i<a;i++){const h=[];for(let c=0;c<a;c++)h.push((i+1)*s+c+m(t,0,1));o.push(h)}const n=m(t,0,a-1),d=m(t,0,a-1),r=o[n][d];o[n][d]=-1;const u=new Set;for(;u.size<3;){const i=r+m(t,-3,3);i!==r&&i>0&&u.add(i)}const l=f(t,[r,...Array.from(u)]);return{type:"pattern",title:"Pattern Grid",description:"Find the missing number in the grid. Look for the pattern in rows and columns.",data:{type:"pattern",grid:o,missingRow:n,missingCol:d,options:l,correctAnswer:r},hints:[`Look at the row: the pattern involves multiples of ${s}.`,"Check adjacent cells for the relationship.",`The missing number is ${r>10?"greater than 10":"10 or less"}.`],solution:r}}function C(t,e){const a=4+Math.floor(e/3),s=["arithmetic"];e>=3&&s.push("geometric"),e>=6&&s.push("fibonacci_like");const o=D(t,s),n=[];switch(o){case"arithmetic":{const h=m(t,1,10),c=m(t,2,3+Math.floor(e/2));for(let p=0;p<a;p++)n.push(h+c*p);break}case"geometric":{const h=m(t,2,4),c=m(t,2,3);for(let p=0;p<a;p++)n.push(h*Math.pow(c,p));break}case"fibonacci_like":{const h=m(t,1,5),c=m(t,1,5);n.push(h,c);for(let p=2;p<a;p++)n.push(n[p-1]+n[p-2]);break}}const d=m(t,1,a-2),r=n[d],u=[...n];u[d]=null;const l=new Set;for(;l.size<3;){const h=m(t,1,6)*(t()>.5?1:-1),c=r+h;c!==r&&c>0&&l.add(c)}const i=f(t,[r,...Array.from(l)]);return{type:"sequence",title:"Number Sequence",description:"Find the missing number in the sequence.",data:{type:"sequence",sequence:u,blankIndex:d,options:i,correctAnswer:r},hints:["Look at the differences between consecutive numbers.",`The sequence follows a ${o.replace("_"," ")} pattern.`,`The missing number is ${r%2===0?"even":"odd"}.`],solution:r}}function E(t,e){const a=["ðŸŽ","ðŸŒŸ","ðŸŽ¯","ðŸ”¥","ðŸ’Ž","ðŸŒˆ","ðŸŽ¸","ðŸš€","ðŸŒ™","ðŸŽª","âš¡","ðŸŒº","ðŸ¦","ðŸ¬","ðŸ•"],s=3+Math.floor(e/2),o=f(t,a).slice(0,s),n=Math.max(2e3,6e3-e*400),r=D(t,[{q:p=>`What was item #${p+1}?`,getAnswer:p=>o[p]},{q:()=>"How many items were shown?",getAnswer:()=>String(s)}]),u=m(t,0,s-1),l=r.q(u),i=r.getAnswer(u);let h;if(l.includes("How many"))h=f(t,[String(s),String(s-1),String(s+1),String(s+2)]);else{const p=f(t,a.filter(g=>g!==i)).slice(0,3);h=f(t,[i,...p])}const c=h.indexOf(i);return{type:"memory",title:"Memory Flash",description:"Memorize the items shown, then answer the question!",data:{type:"memory",items:o,displayTimeMs:n,question:l,options:h,correctIndex:c},hints:[`There are ${s} items to remember.`,"Focus on the positions of items.",`The answer involves "${i}".`],solution:i}}const L=["logic","math","pattern","sequence","memory"],B={logic:v,math:O,pattern:F,sequence:C,memory:E};function R(t){const e=j(t),a=P(e);return L.map((s,o)=>{const n=I(t,o);return{...B[s](a,n),id:`${t}-${s}`,date:t,difficulty:n,timeLimit:Math.max(30,120-n*8),maxScore:100+n*20}})}function T(){const t=new Date;return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`}function H(t,e){const a=[],s=new Date;for(let o=0;o<e;o++){const n=new Date(s);n.setDate(n.getDate()+t+o),a.push(`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}-${String(n.getDate()).padStart(2,"0")}`)}return a}const Y="daily-puzzle-db",_=1;let S=null;async function w(){return S||(S=await q(Y,_,{upgrade(t){t.objectStoreNames.contains("puzzles")||t.createObjectStore("puzzles",{keyPath:"date"}),t.objectStoreNames.contains("progress")||t.createObjectStore("progress",{keyPath:"puzzleId"}),t.objectStoreNames.contains("streaks")||t.createObjectStore("streaks",{keyPath:"date"}),t.objectStoreNames.contains("settings")||t.createObjectStore("settings",{keyPath:"key"})}}),S)}function M(t){return{async get(e){return(await w()).get(t,e)},async put(e){await(await w()).put(t,e)},async delete(e){await(await w()).delete(t,e)},async getAll(){return(await w()).getAll(t)},async clear(){await(await w()).clear(t)},async count(){return(await w()).count(t)}}}const G=M("puzzles"),W=M("progress"),$=M("streaks"),Z=A((t,e)=>({currentStreak:0,longestStreak:0,lastPlayedDate:null,history:{},totalScore:0,initialize:async()=>{const a=await $.getAll(),s={};let o=0;for(const c of a)s[c.date]=c.puzzlesCompleted,o+=c.totalScore;const n=T();let d=0,r=new Date(n);for(;;){const c=k(r);if(s[c]&&s[c]>0)d++,r.setDate(r.getDate()-1);else break}let u=d,l=0;const i=Object.keys(s).sort();for(let c=0;c<i.length;c++)if(s[i[c]]>0?(l++,u=Math.max(u,l)):l=0,c<i.length-1){const p=new Date(i[c]);(new Date(i[c+1]).getTime()-p.getTime())/864e5>1&&(l=0)}const h=i.length>0?i[i.length-1]:null;t({currentStreak:d,longestStreak:u,lastPlayedDate:h,history:s,totalScore:o})},recordCompletion:async a=>{const s=T(),o=e(),n=(o.history[s]||0)+1,d={...o.history,[s]:n};let r=o.currentStreak;if(o.lastPlayedDate!==s){const h=new Date;h.setDate(h.getDate()-1);const c=k(h);o.lastPlayedDate===c||o.currentStreak===0?r=o.currentStreak+1:r=1}const u=Math.max(o.longestStreak,r),l=o.totalScore+a,i=await $.get(s);await $.put({date:s,puzzlesCompleted:n,totalScore:(i?.totalScore||0)+a}),t({currentStreak:r,longestStreak:u,lastPlayedDate:s,history:d,totalScore:l})},getHeatmapData:a=>{const s=e(),o=[],n=new Date;for(let d=a-1;d>=0;d--){const r=new Date(n);r.setDate(r.getDate()-d);const u=k(r);o.push({date:u,count:s.history[u]||0})}return o}}));function k(t){return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`}export{G as a,R as b,H as c,T as g,W as p,$ as s,Z as u};
