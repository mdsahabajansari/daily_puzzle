import{j as e,m as h}from"./vendor-motion-g4hyj0Oo.js";import{r as v}from"./vendor-state-C7GhoC4r.js";import{u as b}from"./streakStore-Df38JZ8q.js";function f(t){return t===0?"bg-slate-800/50":t===1?"bg-emerald-900":t===2?"bg-emerald-700":t===3?"bg-emerald-500":t===4?"bg-emerald-400":"bg-amber-400"}function N(t,s){const l=new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric"});return s===0?`${l}: No puzzles`:`${l}: ${s} puzzle${s>1?"s":""}`}function y({days:t=365}){const{getHeatmapData:s,currentStreak:n,longestStreak:l,totalScore:u}=b(),c=s(t),i=[];let a=[];const o=(new Date(c[0]?.date||Date.now()).getDay()+6)%7;for(let r=0;r<o;r++)a.push({date:"",count:-1});for(const r of c)a.push(r),a.length===7&&(i.push(a),a=[]);return a.length>0&&i.push(a),e.jsxs(h.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"glass p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsx("h3",{className:"text-lg font-bold text-gradient",children:"Activity"}),e.jsxs("div",{className:"flex gap-6 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-400",children:n}),e.jsx("div",{className:"text-slate-500 text-xs",children:"Current Streak"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-amber-400",children:l}),e.jsx("div",{className:"text-slate-500 text-xs",children:"Longest Streak"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-brand-400",children:u.toLocaleString()}),e.jsx("div",{className:"text-slate-500 text-xs",children:"Total Score"})]})]})]}),e.jsx("div",{className:"overflow-x-auto pb-2",children:e.jsx("div",{className:"flex gap-[3px] min-w-fit",children:i.map((r,j)=>e.jsx("div",{className:"flex flex-col gap-[3px]",children:r.map((x,g)=>e.jsx("div",{className:"relative group",children:x.count>=0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`w-[13px] h-[13px] rounded-sm ${f(x.count)} transition-colors`}),e.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 bg-slate-700 text-xs text-white rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none z-10",children:N(x.date,x.count)})]}):e.jsx("div",{className:"w-[13px] h-[13px]"})},`${j}-${g}`))},j))})}),e.jsxs("div",{className:"flex items-center gap-2 mt-3 text-xs text-slate-500",children:[e.jsx("span",{children:"Less"}),[0,1,2,3,4,5].map(r=>e.jsx("div",{className:`w-[13px] h-[13px] rounded-sm ${f(r)}`},r)),e.jsx("span",{children:"More"})]})]})}function D(){const{initialize:t,currentStreak:s,longestStreak:n,totalScore:l,history:u}=b();v.useEffect(()=>{(async()=>{try{await t()}catch(o){console.error("Failed to initialize stats:",o)}})()},[t]);const c=u||{},i=Object.values(c).filter(d=>d>0).length,a=Object.values(c).reduce((d,o)=>d+o,0);return e.jsxs("div",{className:"space-y-10 max-w-4xl mx-auto pb-12",children:[e.jsxs("header",{children:[e.jsx("h2",{className:"text-3xl font-black tracking-tight text-white",children:"PERFORMANCE ANALYTICS"}),e.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[e.jsx("span",{className:"w-2 h-2 bg-brand-500 rounded-full animate-pulse shadow-[0_0_8px_rgba(79,70,229,0.5)]"}),e.jsx("p",{className:"text-slate-400 font-mono text-[10px] uppercase tracking-widest",children:"Real-time cognitive metrics synced"})]})]}),e.jsxs(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(m,{icon:"ðŸ”¥",label:"Current Streak",value:s||0,unit:"Days"}),e.jsx(m,{icon:"ðŸ‘‘",label:"Peak Record",value:n||0,unit:"Days"}),e.jsx(m,{icon:"âœ…",label:"Total Puzzles",value:a||0,unit:"Units"}),e.jsx(m,{icon:"â­ï¸",label:"Global Score",value:(l||0).toLocaleString(),unit:"XP"})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs(h.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},transition:{delay:.2},className:"md:col-span-1 glass p-8 space-y-6",children:[e.jsx("h3",{className:"text-xs font-black uppercase tracking-[0.3em] text-slate-500",children:"Metric Breakdown"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(p,{label:"Active Days",value:i}),e.jsx(p,{label:"Avg Load/Day",value:i>0?(a/i).toFixed(1):"0.0"}),e.jsx(p,{label:"Avg Efficiency",value:a>0?Math.round(l/a):0}),e.jsx(p,{label:"Sync Rate",value:`${i>0?Math.round(a/(i*5)*100):0}%`})]})]}),e.jsxs(h.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},transition:{delay:.3},className:"md:col-span-2 glass p-8 overflow-hidden",children:[e.jsx("h3",{className:"text-xs font-black uppercase tracking-[0.3em] text-slate-500 mb-6",children:"Neural Activity Heatmap"}),e.jsx(y,{days:365})]})]})]})}function m({icon:t,label:s,value:n,unit:l}){return e.jsxs("div",{className:"glass-hover p-6 border-b-4 border-b-brand-600/50",children:[e.jsx("div",{className:"text-2xl mb-3",children:t}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm font-black text-slate-400 uppercase tracking-tighter",children:s}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("span",{className:"text-2xl font-black text-white",children:n}),e.jsx("span",{className:"text-[10px] font-bold text-slate-600 uppercase",children:l})]})]})]})}function p({label:t,value:s}){return e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-white/5",children:[e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500",children:t}),e.jsx("span",{className:"text-sm font-bold text-brand-300",children:s})]})}export{D as default};
